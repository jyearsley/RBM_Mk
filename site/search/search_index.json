{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the River Basin Model (RBM) website! \u00b6 On this website you will find documentation both about the model and how to run the model. Documentation: \u00b6 About Documentation Development","title":"Home"},{"location":"#welcome-to-the-river-basin-model-rbm-website","text":"On this website you will find documentation both about the model and how to run the model.","title":"Welcome to the River Basin Model (RBM) website!"},{"location":"#documentation","text":"About Documentation Development","title":"Documentation:"},{"location":"Development/ModelDevelopment/","text":"Open Source We encourage any users who have modified (or would like to modify) RBM, either to fix bugs or develop new features, to contact us and coordinate development work with us. The RBM model source code is archived in Git and is publicly available through GitHub. To access the source code, visit GitHub, create an account, and visit github.com/UW-Hydro/RBM. The routing model will soon be added to the archive as well. RBM is an open source development model and is released under the terms of the GNU General Public License v2 (GPL). Model Development All development activity is coordinated via the RBM github page, where you can also find all archived, current, beta, and development versions of the model. Release Naming Convention Beginning with the release of RBM 0.4, a release naming convention of RBM.MAJOR.MINOR has been formally adopted. This naming system was introduced by Semantic Versioning and defined as: MAJOR version: when changes are included that are not backward compatible, MINOR version: when features and new functionality are added in a backwards-compatible manner, and","title":"Development"},{"location":"Documentation/ModelDevelopment/","text":"Open Source We encourage any users who have modified (or would like to modify) RBM, either to fix bugs or develop new features, to contact us and coordinate development work with us. The RBM model source code is archived in Git and is publicly available through GitHub. To access the source code, visit GitHub, create an account, and visit github.com/UW-Hydro/RBM. The routing model will soon be added to the archive as well. RBM is an open source development model and is released under the terms of the GNU General Public License v2 (GPL). Model Development All development activity is coordinated via the RBM github page, where you can also find all archived, current, beta, and development versions of the model. Release Naming Convention Beginning with the release of RBM 0.4, a release naming convention of RBM.MAJOR.MINOR has been formally adopted. This naming system was introduced by Semantic Versioning and defined as: MAJOR version: when changes are included that are not backward compatible, MINOR version: when features and new functionality are added in a backwards-compatible manner, and","title":"Development"},{"location":"Documentation/References/","text":"Publications \u00b6 Model Development and Description Liang, X., D.P. Lettenmaier, E.F. Wood, and S.J. Burges, 1994, A simple hydrologically based model of land surface water and energy fluxes for GSMs, J. Geophys. Res., 99(D7), 14,415-14,428. Leopold, L.B., and T. Maddock, 1953, The hydraulic geometry of channels and some physiographic implications, U.S. Geol. Surv. Prof. Paper, 252. Lohmann, D., R. Nolte-Holuber, and E. Raschke, 1996: A large-scale horizontal routing model to be coupled to land surface parameterization schemes, Tellus, 48(A), 708-721. Mohseni, O., H.G. Stefan, and T.R. Erickson, 1998, A nonlinear regression model for weekly stream temperatures, Water Resour. Res., 34(10), 2685-2693, doi:10.1029/98WR01877 Sun, N., J. Yearsley, N. Voisin, and D.P. Lettenmaier (2015): A spatially distributed model for the assessment of land use impacts on stream temperature in small urban watersheds, Hydrological Processes. http://dx.doi.org/10.1002/hyp.10363 . Yearsley J. (2012): A grid-based approach for simulating stream temperature. Wat. Resour. Res., 48. http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Wat. Resour. Res., http://dx.doi.org/doi:10.1029/2008WR007629 . Model Applications Cao, Q. N. Sun, J. Yearsley, B. Nijssen, and D. P. Lettenmaier (2016): Climate and land cover effects on the temperature of Puget Sound streams, http://dx.doi.org/10.1002/hyp.10784 . van Vliet, M.T.H., W.H.P. Franssen, J. Yearsley, F. Ludwig, I. Haddeland, D. P. Lettenmaier, and P. Kabat (2013): Global river discharge and water temperature under climate change, Global Environmental Change, http://dx.doi.org/10.1016/j.gloenvcha.2012.11.002 . van Vliet, M.T.H., J. Yearsley, W.H.P. Franssen, F. Ludwig, I. Haddeland, D.P. Lettenmaier, and P. Kabat (2012): Coupled daily streamflow and water temperature modelling in large river basins, Hydrol. Earth Syst. Sci. Discuss., 9, 8335-8374, http://dx.doi.org/10.5194/hess-16-4303-2012 . van Vliet, M.T.H., J. Yearsley, F. Ludwig, S. Vogele, D.P. Lettenmaier, and P. Kabat (2012): Vulnerability of US and European electricity supply to climate change, Nature Climate Change, http://dx.doi.10.1029/2008WR00762910.1038/nclimate1546 . Yearsley J. (2012): A grid-based approach for simulating stream temperature, Water Resour. Res., 48, W03506, http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Water Resour. Res., 45, W12405, http://dx.doi.org/10.1029/2008WR007629 . Connor, W.P., H.L. Burge, J.Yearsley and T.C. Bjornn (2003): Influence of flow and temperature on survival of wild subyearling Fall Chinook in the Snake River. North Amer. Journ. of Fisheries Management, 23(2):362-375, http://dx.doi.org/10.1577/1548-8675(2003)023%3C0362:IOFATO%3E2.0.CO;2 . Technical Reports Yearsley J. (2003): A preliminary analysis of the thermal regime of Dworshak Reservoir, EPA 910-R-03-011. Yearsley J. (2003): Columbia River Temperature Assessment: Simulation of the thermal regime of Lake Roosevelt, EPA 910-03-003. Yearsley J. (2003): Developing a Temperature Total Maximum Daily Load for the Columbia and Snake Rivers: Simulation Methods, EPA 910-R-03-003. Yearsley J. (2001): Application of a 1-D Temperature Model to the Columbia River System & Application of a 1-D Temperature Model to the Columbia River System - Appendix B Model Tests. Yearsley J., and C.M. Falter (2002): Analysis of ecological risk in the mid-Snake River using simulation methods. Appendix D in Ecological risk assessment for the Middle Snake River, EPA/600/R-01/017.","title":"References"},{"location":"Documentation/References/#publications","text":"Model Development and Description Liang, X., D.P. Lettenmaier, E.F. Wood, and S.J. Burges, 1994, A simple hydrologically based model of land surface water and energy fluxes for GSMs, J. Geophys. Res., 99(D7), 14,415-14,428. Leopold, L.B., and T. Maddock, 1953, The hydraulic geometry of channels and some physiographic implications, U.S. Geol. Surv. Prof. Paper, 252. Lohmann, D., R. Nolte-Holuber, and E. Raschke, 1996: A large-scale horizontal routing model to be coupled to land surface parameterization schemes, Tellus, 48(A), 708-721. Mohseni, O., H.G. Stefan, and T.R. Erickson, 1998, A nonlinear regression model for weekly stream temperatures, Water Resour. Res., 34(10), 2685-2693, doi:10.1029/98WR01877 Sun, N., J. Yearsley, N. Voisin, and D.P. Lettenmaier (2015): A spatially distributed model for the assessment of land use impacts on stream temperature in small urban watersheds, Hydrological Processes. http://dx.doi.org/10.1002/hyp.10363 . Yearsley J. (2012): A grid-based approach for simulating stream temperature. Wat. Resour. Res., 48. http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Wat. Resour. Res., http://dx.doi.org/doi:10.1029/2008WR007629 . Model Applications Cao, Q. N. Sun, J. Yearsley, B. Nijssen, and D. P. Lettenmaier (2016): Climate and land cover effects on the temperature of Puget Sound streams, http://dx.doi.org/10.1002/hyp.10784 . van Vliet, M.T.H., W.H.P. Franssen, J. Yearsley, F. Ludwig, I. Haddeland, D. P. Lettenmaier, and P. Kabat (2013): Global river discharge and water temperature under climate change, Global Environmental Change, http://dx.doi.org/10.1016/j.gloenvcha.2012.11.002 . van Vliet, M.T.H., J. Yearsley, W.H.P. Franssen, F. Ludwig, I. Haddeland, D.P. Lettenmaier, and P. Kabat (2012): Coupled daily streamflow and water temperature modelling in large river basins, Hydrol. Earth Syst. Sci. Discuss., 9, 8335-8374, http://dx.doi.org/10.5194/hess-16-4303-2012 . van Vliet, M.T.H., J. Yearsley, F. Ludwig, S. Vogele, D.P. Lettenmaier, and P. Kabat (2012): Vulnerability of US and European electricity supply to climate change, Nature Climate Change, http://dx.doi.10.1029/2008WR00762910.1038/nclimate1546 . Yearsley J. (2012): A grid-based approach for simulating stream temperature, Water Resour. Res., 48, W03506, http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Water Resour. Res., 45, W12405, http://dx.doi.org/10.1029/2008WR007629 . Connor, W.P., H.L. Burge, J.Yearsley and T.C. Bjornn (2003): Influence of flow and temperature on survival of wild subyearling Fall Chinook in the Snake River. North Amer. Journ. of Fisheries Management, 23(2):362-375, http://dx.doi.org/10.1577/1548-8675(2003)023%3C0362:IOFATO%3E2.0.CO;2 . Technical Reports Yearsley J. (2003): A preliminary analysis of the thermal regime of Dworshak Reservoir, EPA 910-R-03-011. Yearsley J. (2003): Columbia River Temperature Assessment: Simulation of the thermal regime of Lake Roosevelt, EPA 910-03-003. Yearsley J. (2003): Developing a Temperature Total Maximum Daily Load for the Columbia and Snake Rivers: Simulation Methods, EPA 910-R-03-003. Yearsley J. (2001): Application of a 1-D Temperature Model to the Columbia River System & Application of a 1-D Temperature Model to the Columbia River System - Appendix B Model Tests. Yearsley J., and C.M. Falter (2002): Analysis of ecological risk in the mid-Snake River using simulation methods. Appendix D in Ecological risk assessment for the Middle Snake River, EPA/600/R-01/017.","title":"Publications"},{"location":"Documentation/run_RBM/","text":"Steps to run RBM (Salmon River example) \u00b6 The following describes the steps for simulating water temperature with the grid-based semi-Lagrangian model, RBM, assuming one has downloaded VIC 4.2.d and prepared all the necessary input files. 1. Download Source Code & Example Datasets \u00b6 Download the source code for VIC_RBM2.2, please refer to Downloads/Code Download the example data sets, please refer to Downloads/Datasets/Sample Dataset After unzipping the example dataset Salmon_River_data , you can find the file\uff1a DESCRIPTION - a text file describing the contents of each sub-directory. The sub-directories within this directory are: Sub-directories Description RBM/Perl_Scripts pre- and post-processing scripts written in Perl RBM/src the Fortran 90 source and Makefile that builds the executable. RBM and places it in the directory, ../Test_Case . Users may wish to change this by editing the makefile. RBM/rout_DA the source code and Makefile for the modified routing model, rout_RBM. Salmon_River_data/Test_case the input files and executable for running the example problem, using input data for the Salmon River basin at a gridded resolution of 1/2\u00b0 lat/long. Salmon_River_data/UH_output the sample output from executing the routing model, rout , and the input data for the sample problem. Salmon_River_data/VIC_forcing the daily precipitation (mm), max/min air temperatures (\u00b0C), and wind speed (m/sec) that provides forcings for each VIC grid cell. Salmon_River_data/run_VIC the snowbands, soil, veg-param files, the world_veg_lib files and example global parameter files Salmon_River_data/VIC_output the meteorologic output files, full_data_lat_long, and the hydrologic output - files, flux_lat_long, from the VIC simulations. 2. Create the RBM Executable \u00b6 Navigate to the folder, RBM/src , and type: make This will create the executable, rbm10_VIC . 3. Run the Model \u00b6 Step 1 Build the forcing function files (flow and meteorology) \u00b6 In the example, we run hydrological model VIC4.2.d to generate flow and energy fluxes, which are input data for RBM. The example global parameter files can be found in the directory run_VIC . To create the necessary files (executable file to run VIC), you need to download VIC4.2.d . The instructions to generate the executable file vicNl and run VIC can be found here . The example global files to generate baseflow, surface runoff and heat fluxes are also included in the folder run_VIC and you need to specify the output directory in those two global parameter files before you use them. The two global files can be run as follows: full/path/to/vicNl \u2013g global_param_Salmon_0.5_flux which generates base flow and runoff and full/path/to/vicNl \u2013g global_param_Salmon_0.5_full_data which generates heats budget Note: Again! The output directories need to be specified in each global parameter files, global_param_Salmon_0.5_flux and global_param_Salmon_0.5_full_data in this case. How to use command line to run a model? The command line above is an abbreviate for full/path/to/executable/file -g full/path/to/global/parameter/file . If the global parameter files are located in the current directory, you can use the command line above. If not, you need to add the full path before each file. This rule is also applied in the following steps. If the script/executable/control/parameter files are not in the current directory, you need to add the full paths to them. Step 2 Generate topology file \u00b6 In the folder, ../Test_Case , run the perl script, build_network_beta.pl* (copied from ../Perl_Scripts ) using the direction file. Example direction file *Salmon_flowd_0.5.dir can be found in ../Test_Case . In the flow direction file, all the grid cells surrounding the basin of interest must contain a negative one (-1). Also, we cannot simulate a river system containing braided networks. The following is the command for generating the topology file for the Salman example: perl build_network_beta.pl Salmon_flowd_0.5.dir Salmon_0.5.Topology This script requires two input arguments in the command line: the path of the direction file Salmon_flowd_0.5.dir and the path of the output file Salmon_0.5.Topology . Step 3 Prepare control file for generating network file \u00b6 The user needs to prepare a control file in order to generate network file. Network file is an important input to run RBM. This control file (see Figure 2 for an example) contains all information that we need to generate network file. Details are described below: Input Note Starting Date: 8 digit number, format: YYYYMMDD Ending Data: 8 digit number, format: YYYYMMDD Time Steps per Day: This version of model simulates only daily averages, so this is always \"1\". Input directory: The directory containing input forcing data Output directory: Full path to the output directory Topology File: Specify the path/filename of topology file Network File: The Network File must have the suffix, _Network. Flow File: This is the name of the file that will be created by the routing program Heat File: This is the name of the file that will be created by the routing program Mohseni Parameters: When the characters, \" grid\" (note the space) are missing, constant values for the Mohseni parameters are obtained from a file with the same format as the example file, Salmon_Parameters . Heat Dump: FALSE if there is no advective heat source (Power Plants, for example) Ndelta: Usually \"2\", but can be larger, particularly in the case of slower streams The control file must have the suffix, .Control , and the colon (:) after the descriptive characters in each line is required. An example control file is also included in the folder Test_case . Note: The input/output directories need to be changed by user accordingly in the example control file. Step 4 Generate network file \u00b6 Run the Perl script build_input.pl , using the control file Salmon_0.5.Control generated in the previous step as input, to create the network file required by RBM ( Salmon_0.5_Network in this example) and the routing location file required for the routing scheme ( Rout.Cells.init and Rout.Cells ). See Appendix A for a description of elements in the network file. Here again, the project name ( Salmon_0.5 ) is required on the command line. The suffix, .Control , is appended by the Perl script: perl build_input.pl Salmon_0.5 Step 5 Prepare routing input files \u00b6 Build the forcing function files for flow and heat budget using rout , the executable file for routing model. Navigate to the folder, rout_DA , and run: make This will create the executable, rout User needs to prepare a control file salmon.inp_DA (see Figure 3 for an example) to run the modified Lohmann routing model. The Name of station file specified in this control file should be set to the file Rout.Cells.init if this is the first time running the routing model, and to the file Rout.Cells if the routing model has already been run before using the same routing parameters. The input file (in this example, salmon.inp_DA ) is similar to that described on the VIC model Web site with the exception of the addition the Leopold parameters. Most parameters in this control file are the same as the original Lohmann routing model, and see here for detailed instructions. (See 2 Creating a Hydrograph ) Step 6 Run routing model \u00b6 Run rout from the directory, Test_Case, using the file, salmon.inp_DA full/path/to/rout salmon.inp_DA creating the direct access files for flow and heat budget ( Salmon_DA_flow and Salmon_DA_heat in the example). See Appendix A for a description of the variables in the flow and heat budget files. Step 7 Run RBM \u00b6 All necessary files have been created at this point (see Appendix A for a description of RBM output). Run the temperature model RBM with command line as follows: full/path/to/rbm10_VIC Salmon_0.5 Salmon_0.5 [RBM_executable_file] [path/to/network_file] [path/to/output_file] where first Salmon_0.5* refers to Salmon_0.5_Network (\" _Network \" is appended by the model software) and second \" Salmon_0.5 \" is the output file name (this refers to full_path/output_name . In this case, if no directory is addressed, the output file will be directly located in the current directory). \" *Salmon_0.5.Spat \" is also created and is a file that cross-references element numbers in the output file \" Salmon_0.5.Temp \" to lat/long for post-processing. APPENDIX A: RBM I/O instruction \u00b6 Notation: \u00b6 Reach : stream reaches can include several cells Cell : a cell is a grid cell. Cell path : each reach is first divided into parts, which we call cell path here, based on cells; for each reach, if it covers \"ncell\" number of cells, then it has (ncell - 1) number of cell paths Node : A cell can have one or more nodes. If a cell is not a confluence, then it has one node; if a cell is a confluence cell, then this cell has more than one node, depending on how many tributaries converge at this cell. Cell paths are the channel parts that are between two adjacent nodes. Segment : a cell path is further divided into multiple segments (default is that each river cell is divided into two segments). Segment points: the division points of segments. Note that the most upstream segment point would be the upstream edge of the headwater cell. Example: \u00b6 Some variables below are explained using the topology of the Salmon example: Network file (input): \u00b6 Line 1: not read Line 2: directory of flow file Line 3: directory of heat file Line 4: <start_date> <end_date> date format is \"YYYYMMDD\". Extra arguments will not be read. Line 5: <nreach> <flow_cells> <heat_cells> <source> <nreach>: number of reaches. A reach (Figure 1) is comprised of segments from the headwaters (circles) to the confluence with the next longest reach (squares). In Figure 1, a 1st order reach is the color, magenta, a 2nd order reach is the color, chartreuse, and the longest (main stem) reach is the color, blue. Note that the term, \u201corder\u201d, is not the same as the term used in the Strahler classification of stream order. In the example from the Salmon River, nreach = 7. <flow_cells>: number of total cell paths. In the example, flow_cells = 19. <heat_cells>: number of nodes. For non-confluence cells, each cell has one node. For confluence cells, one cell has more than one nodes (depending on how many tributaries it has). <source>: whether there are point source inputs. TRUE for yes, FALSE for no. (Line 6: <souce_file>) If <source>=TRUE, this line is the path of point source file. For each reach: Line 1: <no_cells> Headwaters <head_name> TribCell <trib_cell> Headwaters <main_stem> R.M. = <rmile0> <no_cells>: number of nodes in the reach (at least 2) <head_name>: the headwater number. Since one headwater corresponds to one reach, headwater number is also the indicator of reach number. <trib_cell>: the node number in the next higher order reach where the current reach enters into. If the current reach is the highest order reach, then <trib_cell> is equal to the node number of the outlet node. <main_stem>: the headwater number (thus also the reach number) of the next higher order reach it enters. If the current reach is the highest order reach, then <main_stem> is equal to 0. <rmile0>: length of the reach + length of one extra grid cell upstream of the headwater cell. Line 2: <alphaMu> <beta> <gamma> <mu> <smooth_param> Mohseni parameters for this reach (alphaMu is 'alpha - mu') For each cell in the reach (number of loops = <no_cells>): Line 1: Node <node> Row <row> Column <col> Lat <lat> Long <lon> R.M. = <rmile1> <ndelta> <node>: node number of this node in this reach (note that the same cell can have multiple nodes if it is a confluence cell) <row>: row number of the node <col>: column number of the node <lat>: lat of the node <lon>: lon of the node <rmile1>: river length (in miles) between this node and the most downstream node of this reach (so if the current node is the most downstream node, its <rmile1> would be 0) <ndelta>: number of segments of this cell in this reach (each cell reach is further diveded into <ndelta> number of segments for calculation); default: 2. Flow file (input): \u00b6 For each time step (currently daily): For each reach: for each cell in this reach (except the most downstream node): Line: <nnd> <ncell> <Q_in> <Q_out> <Q_diff> <depth> <width> <nnd>: index of time step (currently daily, i.e., 1, 2, ..., last day) <ncell>: node number (must be in order, and must skip the last node in each reach) <Q_in>: inflow discharge of the node [cfs] <Q_out>: outflow discharge of the node [cfs] <Q_diff>: lateral flow directly from land surface [cfs] (usually 0 if flow is already routed) depth>: flow depth [ft] <width>: channel width [ft] (not used) <u>: flow velocity [ft/s] Note: Changing line is not necessary Heat file (input): \u00b6 For each time step (currently daily): For each reach: for each cell in this reach (including the last cell also): Line: <ncell> <dbt> <ea> <Q_ns> <Q_na> <rho> <press> <wind> <ncell>: node number (must be in order) <dbt>: air temperature [degC] <ea>: air vapor pressure at surface [mb] <Q_ns>: net incoming shortwave radiation [Kcal/sec/meter**2] (see modified routing model instruction for details in units) <Q_na>: net incoming longwave radiation [Kcal/sec/meter**2] (see modified routing model instruction for details in units) <rho>: air density [kg/m3] (not used) Output file (*.Spat): \u00b6 For each divided stream segment: Line: <reach_ind> <cell_ind> <row> <col> <lat> <lon> <delta_ind> <reach_ind>: index of reach (i.e., which reach it is) <cell_ind>: index of node (i.e., which node in this reach it is) <row>: row number of the cell <col>: column number of the cell <lat>: lat of the cell <lon>: lon of the cell <delta_ind>: index of the divided segment point (i.e., which segment point in this cell and this reach it is). Note that the first segment point in the cell would be the upstream edge of the cell; the last segment point would be the last segment point upstream from the downstream edge of the cell (but not the downstream edge). For example, if using the default segment number = 2 for each cell, the first segment point would be the upstream edge of the cell; the second segment point would be the middle point of the cell. Output file (*.Temp): \u00b6 For each node: Line: <time> <nd> <nr> <ncell> <ns> <T_0> <T_head> <dbt> <time>: decimal year <nd>: day of year <nr>: reach index <ncell>: node index in this reach <ns>: segment index in this reach (note that it is index in this reach, but not just in this cell) <T_0>: stream temperature <T_head>: headwater temperature (should be the same for a certain reach) <dbt>: air temperature (should be the same for the nodes which are in the same cell) Figures \u00b6 Figure1: Network Example Figure2: Sample control file to run RBM for the Salmon River basin at a resolution 0.5\u00b0 latitude/longitude. (Note:This example makes use of a gridded set of Mohseni parameters) Figure3: Input control file for running the routing model, rout. This will produce the flow and thermal energy forcings for RBM, as well as the unit hydrographs for additional simulations.","title":"How to run RBM (Salmon River example)"},{"location":"Documentation/run_RBM/#steps-to-run-rbm-salmon-river-example","text":"The following describes the steps for simulating water temperature with the grid-based semi-Lagrangian model, RBM, assuming one has downloaded VIC 4.2.d and prepared all the necessary input files.","title":"Steps to run RBM (Salmon River example)"},{"location":"Documentation/run_RBM/#1-download-source-code-example-datasets","text":"Download the source code for VIC_RBM2.2, please refer to Downloads/Code Download the example data sets, please refer to Downloads/Datasets/Sample Dataset After unzipping the example dataset Salmon_River_data , you can find the file\uff1a DESCRIPTION - a text file describing the contents of each sub-directory. The sub-directories within this directory are: Sub-directories Description RBM/Perl_Scripts pre- and post-processing scripts written in Perl RBM/src the Fortran 90 source and Makefile that builds the executable. RBM and places it in the directory, ../Test_Case . Users may wish to change this by editing the makefile. RBM/rout_DA the source code and Makefile for the modified routing model, rout_RBM. Salmon_River_data/Test_case the input files and executable for running the example problem, using input data for the Salmon River basin at a gridded resolution of 1/2\u00b0 lat/long. Salmon_River_data/UH_output the sample output from executing the routing model, rout , and the input data for the sample problem. Salmon_River_data/VIC_forcing the daily precipitation (mm), max/min air temperatures (\u00b0C), and wind speed (m/sec) that provides forcings for each VIC grid cell. Salmon_River_data/run_VIC the snowbands, soil, veg-param files, the world_veg_lib files and example global parameter files Salmon_River_data/VIC_output the meteorologic output files, full_data_lat_long, and the hydrologic output - files, flux_lat_long, from the VIC simulations.","title":"1. Download Source Code &amp; Example Datasets"},{"location":"Documentation/run_RBM/#2-create-the-rbm-executable","text":"Navigate to the folder, RBM/src , and type: make This will create the executable, rbm10_VIC .","title":"2. Create the RBM Executable"},{"location":"Documentation/run_RBM/#3-run-the-model","text":"","title":"3. Run the Model"},{"location":"Documentation/run_RBM/#step-1-build-the-forcing-function-files-flow-and-meteorology","text":"In the example, we run hydrological model VIC4.2.d to generate flow and energy fluxes, which are input data for RBM. The example global parameter files can be found in the directory run_VIC . To create the necessary files (executable file to run VIC), you need to download VIC4.2.d . The instructions to generate the executable file vicNl and run VIC can be found here . The example global files to generate baseflow, surface runoff and heat fluxes are also included in the folder run_VIC and you need to specify the output directory in those two global parameter files before you use them. The two global files can be run as follows: full/path/to/vicNl \u2013g global_param_Salmon_0.5_flux which generates base flow and runoff and full/path/to/vicNl \u2013g global_param_Salmon_0.5_full_data which generates heats budget Note: Again! The output directories need to be specified in each global parameter files, global_param_Salmon_0.5_flux and global_param_Salmon_0.5_full_data in this case. How to use command line to run a model? The command line above is an abbreviate for full/path/to/executable/file -g full/path/to/global/parameter/file . If the global parameter files are located in the current directory, you can use the command line above. If not, you need to add the full path before each file. This rule is also applied in the following steps. If the script/executable/control/parameter files are not in the current directory, you need to add the full paths to them.","title":"Step 1 Build the forcing function files (flow and meteorology)"},{"location":"Documentation/run_RBM/#step-2-generate-topology-file","text":"In the folder, ../Test_Case , run the perl script, build_network_beta.pl* (copied from ../Perl_Scripts ) using the direction file. Example direction file *Salmon_flowd_0.5.dir can be found in ../Test_Case . In the flow direction file, all the grid cells surrounding the basin of interest must contain a negative one (-1). Also, we cannot simulate a river system containing braided networks. The following is the command for generating the topology file for the Salman example: perl build_network_beta.pl Salmon_flowd_0.5.dir Salmon_0.5.Topology This script requires two input arguments in the command line: the path of the direction file Salmon_flowd_0.5.dir and the path of the output file Salmon_0.5.Topology .","title":"Step 2 Generate topology file"},{"location":"Documentation/run_RBM/#step-3-prepare-control-file-for-generating-network-file","text":"The user needs to prepare a control file in order to generate network file. Network file is an important input to run RBM. This control file (see Figure 2 for an example) contains all information that we need to generate network file. Details are described below: Input Note Starting Date: 8 digit number, format: YYYYMMDD Ending Data: 8 digit number, format: YYYYMMDD Time Steps per Day: This version of model simulates only daily averages, so this is always \"1\". Input directory: The directory containing input forcing data Output directory: Full path to the output directory Topology File: Specify the path/filename of topology file Network File: The Network File must have the suffix, _Network. Flow File: This is the name of the file that will be created by the routing program Heat File: This is the name of the file that will be created by the routing program Mohseni Parameters: When the characters, \" grid\" (note the space) are missing, constant values for the Mohseni parameters are obtained from a file with the same format as the example file, Salmon_Parameters . Heat Dump: FALSE if there is no advective heat source (Power Plants, for example) Ndelta: Usually \"2\", but can be larger, particularly in the case of slower streams The control file must have the suffix, .Control , and the colon (:) after the descriptive characters in each line is required. An example control file is also included in the folder Test_case . Note: The input/output directories need to be changed by user accordingly in the example control file.","title":"Step 3 Prepare control file for generating network file"},{"location":"Documentation/run_RBM/#step-4-generate-network-file","text":"Run the Perl script build_input.pl , using the control file Salmon_0.5.Control generated in the previous step as input, to create the network file required by RBM ( Salmon_0.5_Network in this example) and the routing location file required for the routing scheme ( Rout.Cells.init and Rout.Cells ). See Appendix A for a description of elements in the network file. Here again, the project name ( Salmon_0.5 ) is required on the command line. The suffix, .Control , is appended by the Perl script: perl build_input.pl Salmon_0.5","title":"Step 4 Generate network file"},{"location":"Documentation/run_RBM/#step-5-prepare-routing-input-files","text":"Build the forcing function files for flow and heat budget using rout , the executable file for routing model. Navigate to the folder, rout_DA , and run: make This will create the executable, rout User needs to prepare a control file salmon.inp_DA (see Figure 3 for an example) to run the modified Lohmann routing model. The Name of station file specified in this control file should be set to the file Rout.Cells.init if this is the first time running the routing model, and to the file Rout.Cells if the routing model has already been run before using the same routing parameters. The input file (in this example, salmon.inp_DA ) is similar to that described on the VIC model Web site with the exception of the addition the Leopold parameters. Most parameters in this control file are the same as the original Lohmann routing model, and see here for detailed instructions. (See 2 Creating a Hydrograph )","title":"Step 5 Prepare routing input files"},{"location":"Documentation/run_RBM/#step-6-run-routing-model","text":"Run rout from the directory, Test_Case, using the file, salmon.inp_DA full/path/to/rout salmon.inp_DA creating the direct access files for flow and heat budget ( Salmon_DA_flow and Salmon_DA_heat in the example). See Appendix A for a description of the variables in the flow and heat budget files.","title":"Step 6 Run routing model"},{"location":"Documentation/run_RBM/#step-7-run-rbm","text":"All necessary files have been created at this point (see Appendix A for a description of RBM output). Run the temperature model RBM with command line as follows: full/path/to/rbm10_VIC Salmon_0.5 Salmon_0.5 [RBM_executable_file] [path/to/network_file] [path/to/output_file] where first Salmon_0.5* refers to Salmon_0.5_Network (\" _Network \" is appended by the model software) and second \" Salmon_0.5 \" is the output file name (this refers to full_path/output_name . In this case, if no directory is addressed, the output file will be directly located in the current directory). \" *Salmon_0.5.Spat \" is also created and is a file that cross-references element numbers in the output file \" Salmon_0.5.Temp \" to lat/long for post-processing.","title":"Step 7 Run RBM"},{"location":"Documentation/run_RBM/#appendix-a-rbm-io-instruction","text":"","title":"APPENDIX A: RBM I/O instruction"},{"location":"Documentation/run_RBM/#notation","text":"Reach : stream reaches can include several cells Cell : a cell is a grid cell. Cell path : each reach is first divided into parts, which we call cell path here, based on cells; for each reach, if it covers \"ncell\" number of cells, then it has (ncell - 1) number of cell paths Node : A cell can have one or more nodes. If a cell is not a confluence, then it has one node; if a cell is a confluence cell, then this cell has more than one node, depending on how many tributaries converge at this cell. Cell paths are the channel parts that are between two adjacent nodes. Segment : a cell path is further divided into multiple segments (default is that each river cell is divided into two segments). Segment points: the division points of segments. Note that the most upstream segment point would be the upstream edge of the headwater cell.","title":"Notation:"},{"location":"Documentation/run_RBM/#example","text":"Some variables below are explained using the topology of the Salmon example:","title":"Example:"},{"location":"Documentation/run_RBM/#network-file-input","text":"Line 1: not read Line 2: directory of flow file Line 3: directory of heat file Line 4: <start_date> <end_date> date format is \"YYYYMMDD\". Extra arguments will not be read. Line 5: <nreach> <flow_cells> <heat_cells> <source> <nreach>: number of reaches. A reach (Figure 1) is comprised of segments from the headwaters (circles) to the confluence with the next longest reach (squares). In Figure 1, a 1st order reach is the color, magenta, a 2nd order reach is the color, chartreuse, and the longest (main stem) reach is the color, blue. Note that the term, \u201corder\u201d, is not the same as the term used in the Strahler classification of stream order. In the example from the Salmon River, nreach = 7. <flow_cells>: number of total cell paths. In the example, flow_cells = 19. <heat_cells>: number of nodes. For non-confluence cells, each cell has one node. For confluence cells, one cell has more than one nodes (depending on how many tributaries it has). <source>: whether there are point source inputs. TRUE for yes, FALSE for no. (Line 6: <souce_file>) If <source>=TRUE, this line is the path of point source file. For each reach: Line 1: <no_cells> Headwaters <head_name> TribCell <trib_cell> Headwaters <main_stem> R.M. = <rmile0> <no_cells>: number of nodes in the reach (at least 2) <head_name>: the headwater number. Since one headwater corresponds to one reach, headwater number is also the indicator of reach number. <trib_cell>: the node number in the next higher order reach where the current reach enters into. If the current reach is the highest order reach, then <trib_cell> is equal to the node number of the outlet node. <main_stem>: the headwater number (thus also the reach number) of the next higher order reach it enters. If the current reach is the highest order reach, then <main_stem> is equal to 0. <rmile0>: length of the reach + length of one extra grid cell upstream of the headwater cell. Line 2: <alphaMu> <beta> <gamma> <mu> <smooth_param> Mohseni parameters for this reach (alphaMu is 'alpha - mu') For each cell in the reach (number of loops = <no_cells>): Line 1: Node <node> Row <row> Column <col> Lat <lat> Long <lon> R.M. = <rmile1> <ndelta> <node>: node number of this node in this reach (note that the same cell can have multiple nodes if it is a confluence cell) <row>: row number of the node <col>: column number of the node <lat>: lat of the node <lon>: lon of the node <rmile1>: river length (in miles) between this node and the most downstream node of this reach (so if the current node is the most downstream node, its <rmile1> would be 0) <ndelta>: number of segments of this cell in this reach (each cell reach is further diveded into <ndelta> number of segments for calculation); default: 2.","title":"Network file (input):"},{"location":"Documentation/run_RBM/#flow-file-input","text":"For each time step (currently daily): For each reach: for each cell in this reach (except the most downstream node): Line: <nnd> <ncell> <Q_in> <Q_out> <Q_diff> <depth> <width> <nnd>: index of time step (currently daily, i.e., 1, 2, ..., last day) <ncell>: node number (must be in order, and must skip the last node in each reach) <Q_in>: inflow discharge of the node [cfs] <Q_out>: outflow discharge of the node [cfs] <Q_diff>: lateral flow directly from land surface [cfs] (usually 0 if flow is already routed) depth>: flow depth [ft] <width>: channel width [ft] (not used) <u>: flow velocity [ft/s] Note: Changing line is not necessary","title":"Flow file (input):"},{"location":"Documentation/run_RBM/#heat-file-input","text":"For each time step (currently daily): For each reach: for each cell in this reach (including the last cell also): Line: <ncell> <dbt> <ea> <Q_ns> <Q_na> <rho> <press> <wind> <ncell>: node number (must be in order) <dbt>: air temperature [degC] <ea>: air vapor pressure at surface [mb] <Q_ns>: net incoming shortwave radiation [Kcal/sec/meter**2] (see modified routing model instruction for details in units) <Q_na>: net incoming longwave radiation [Kcal/sec/meter**2] (see modified routing model instruction for details in units) <rho>: air density [kg/m3] (not used)","title":"Heat file (input):"},{"location":"Documentation/run_RBM/#output-file-spat","text":"For each divided stream segment: Line: <reach_ind> <cell_ind> <row> <col> <lat> <lon> <delta_ind> <reach_ind>: index of reach (i.e., which reach it is) <cell_ind>: index of node (i.e., which node in this reach it is) <row>: row number of the cell <col>: column number of the cell <lat>: lat of the cell <lon>: lon of the cell <delta_ind>: index of the divided segment point (i.e., which segment point in this cell and this reach it is). Note that the first segment point in the cell would be the upstream edge of the cell; the last segment point would be the last segment point upstream from the downstream edge of the cell (but not the downstream edge). For example, if using the default segment number = 2 for each cell, the first segment point would be the upstream edge of the cell; the second segment point would be the middle point of the cell.","title":"Output file (*.Spat):"},{"location":"Documentation/run_RBM/#output-file-temp","text":"For each node: Line: <time> <nd> <nr> <ncell> <ns> <T_0> <T_head> <dbt> <time>: decimal year <nd>: day of year <nr>: reach index <ncell>: node index in this reach <ns>: segment index in this reach (note that it is index in this reach, but not just in this cell) <T_0>: stream temperature <T_head>: headwater temperature (should be the same for a certain reach) <dbt>: air temperature (should be the same for the nodes which are in the same cell)","title":"Output file (*.Temp):"},{"location":"Documentation/run_RBM/#figures","text":"Figure1: Network Example Figure2: Sample control file to run RBM for the Salmon River basin at a resolution 0.5\u00b0 latitude/longitude. (Note:This example makes use of a gridded set of Mohseni parameters) Figure3: Input control file for running the routing model, rout. This will produce the flow and thermal energy forcings for RBM, as well as the unit hydrographs for additional simulations.","title":"Figures"},{"location":"Documentation/tutorial/","text":"Tutorial for Running the VIC-RBM hydrologic and stream temperature model \u00b6 These are the instructions for running the integrated modeling system comprised of the large-scale hydrologic model VIC ( Liang et al, 1994 ), a routing model based on the work of Lohmann et al (1996) and the semi-Lagrangian water temperature model, RBM ( Yearsley, 2009, 2012 ). Model development and implementation for the large-scale hydrologic model VIC are described in detail on the website of the University of Washington Department of Civil and Environmental Engineering's UW Hydro|Computational Hydrology group 1. Overview \u00b6 The VIC-RBM model is a coupled hydrologic and stream temperature model that links three sub-models together: the VIC model; the routing model; and the RBM model. The VIC model is a hydrologic model that uses meteorological forcing data as input and simulates hydrologic variables such as runoff, evapotranspiration and soil moisture at each grid cell. The routing model takes the output from the VIC model along with flow network information as input, and output streamflow at specified locations along stream network. The RBM model takes both the streamflow results and the meteorological data as input and calculate stream temperature along stream network. Thus, the VIC-RBM model as a whole is able to simulate both streamflow and stream temperature at spatial scales determined by the basic VIC gridded network configuration. VIC gridded networks have been developed for the Continental United States (CONUS) at 1/16, 1/8, 1/4, 1/2 and 1 degree of latitude and longitude. As presently configured, the VIC-RBM model system simulates daily-averaged or subdaily stream temperatures in accordance with the timestep of input. 2. Model input \u00b6 1)Input for the VIC hydrologic model \u00b6 Meteorological forcing data at each grid cell Minimum requirement: daily precipitation daily maximum and minimum temperature wind speed VIC includes a meteorological data disaggregator that calculates subdaily meteorological variables required by VIC from the minimum forcing variables. Details can be seen in the VIC website . Please note: the meteorological disaggregator is deprecated in the new version VIC5. Soil properties at each grid cell Vegetation information at each grid cell 2)Input for the routing model \u00b6 Flow direction file \u2013 describes the topology of the river basin network. Unit hydrograph file - contains the grid cell impulse response function. flow velocity, diffusivity and flow distance values - we set them to spatially constant values so don't have separate input files for these) More details about input for Lohmann routing model can be seen here . 3)Input for the RBM stream temperature model \u00b6 Mohseni parameters: empirical parameters in Mohseni method ( Mohseni et al., 1998 ), which is an empirical method to estimate headwater temperatures from air temperatures. Stream hydraulics, including flow depth and velocity. Estimated from stream discharge based on the method developed by Leopold and Maddock (1953) . 3. Model output \u00b6 Possible model output from the VIC-RBM model includes: Grid-cell-based meteorological data at each grid cell at daily or subdaily time step (calculated by the VIC disaggregator), including: Atmospheric pressure and density Vapor pressure (or vapor pressure deficit or relative humidity or specific humidity); Incoming shortwave (solar) radiation Incoming longwave (or thermal) radiation Grid-cell-based hydrologic data at each grid cell at daily or subdaily time step (calculated by the VIC model), such as: runoff Snow cover Soil moisture Evapotranspiration ... ... Grid-cell-based energy data at each grid cell at daily or subdaily time step (calculated by the VIC model), such as: Net downward shortwave radiation Net downward longwave radiation Net upward sensible heat ... ... Routed streamflow at specified stream locations (can be any locations within the stream network, and the resolution is the same as grid cell, i.e., stream locations are specified by indicating the grid cell in which it falls) calculated by the routing model, daily time step. Stream temperature at specified stream locations calculated by the RBM model, at daily or subdaily time steps.","title":"Tutorial"},{"location":"Documentation/tutorial/#tutorial-for-running-the-vic-rbm-hydrologic-and-stream-temperature-model","text":"These are the instructions for running the integrated modeling system comprised of the large-scale hydrologic model VIC ( Liang et al, 1994 ), a routing model based on the work of Lohmann et al (1996) and the semi-Lagrangian water temperature model, RBM ( Yearsley, 2009, 2012 ). Model development and implementation for the large-scale hydrologic model VIC are described in detail on the website of the University of Washington Department of Civil and Environmental Engineering's UW Hydro|Computational Hydrology group","title":"Tutorial for Running the VIC-RBM hydrologic and stream temperature model"},{"location":"Documentation/tutorial/#1-overview","text":"The VIC-RBM model is a coupled hydrologic and stream temperature model that links three sub-models together: the VIC model; the routing model; and the RBM model. The VIC model is a hydrologic model that uses meteorological forcing data as input and simulates hydrologic variables such as runoff, evapotranspiration and soil moisture at each grid cell. The routing model takes the output from the VIC model along with flow network information as input, and output streamflow at specified locations along stream network. The RBM model takes both the streamflow results and the meteorological data as input and calculate stream temperature along stream network. Thus, the VIC-RBM model as a whole is able to simulate both streamflow and stream temperature at spatial scales determined by the basic VIC gridded network configuration. VIC gridded networks have been developed for the Continental United States (CONUS) at 1/16, 1/8, 1/4, 1/2 and 1 degree of latitude and longitude. As presently configured, the VIC-RBM model system simulates daily-averaged or subdaily stream temperatures in accordance with the timestep of input.","title":"1. Overview"},{"location":"Documentation/tutorial/#2-model-input","text":"","title":"2. Model input"},{"location":"Documentation/tutorial/#1input-for-the-vic-hydrologic-model","text":"Meteorological forcing data at each grid cell Minimum requirement: daily precipitation daily maximum and minimum temperature wind speed VIC includes a meteorological data disaggregator that calculates subdaily meteorological variables required by VIC from the minimum forcing variables. Details can be seen in the VIC website . Please note: the meteorological disaggregator is deprecated in the new version VIC5. Soil properties at each grid cell Vegetation information at each grid cell","title":"1)Input for the VIC hydrologic model"},{"location":"Documentation/tutorial/#2input-for-the-routing-model","text":"Flow direction file \u2013 describes the topology of the river basin network. Unit hydrograph file - contains the grid cell impulse response function. flow velocity, diffusivity and flow distance values - we set them to spatially constant values so don't have separate input files for these) More details about input for Lohmann routing model can be seen here .","title":"2)Input for the routing model"},{"location":"Documentation/tutorial/#3input-for-the-rbm-stream-temperature-model","text":"Mohseni parameters: empirical parameters in Mohseni method ( Mohseni et al., 1998 ), which is an empirical method to estimate headwater temperatures from air temperatures. Stream hydraulics, including flow depth and velocity. Estimated from stream discharge based on the method developed by Leopold and Maddock (1953) .","title":"3)Input for the RBM stream temperature model"},{"location":"Documentation/tutorial/#3-model-output","text":"Possible model output from the VIC-RBM model includes: Grid-cell-based meteorological data at each grid cell at daily or subdaily time step (calculated by the VIC disaggregator), including: Atmospheric pressure and density Vapor pressure (or vapor pressure deficit or relative humidity or specific humidity); Incoming shortwave (solar) radiation Incoming longwave (or thermal) radiation Grid-cell-based hydrologic data at each grid cell at daily or subdaily time step (calculated by the VIC model), such as: runoff Snow cover Soil moisture Evapotranspiration ... ... Grid-cell-based energy data at each grid cell at daily or subdaily time step (calculated by the VIC model), such as: Net downward shortwave radiation Net downward longwave radiation Net upward sensible heat ... ... Routed streamflow at specified stream locations (can be any locations within the stream network, and the resolution is the same as grid cell, i.e., stream locations are specified by indicating the grid cell in which it falls) calculated by the routing model, daily time step. Stream temperature at specified stream locations calculated by the RBM model, at daily or subdaily time steps.","title":"3. Model output"},{"location":"Overview/ModelOverview/","text":"Model overview \u00b6 RBM is a one-dimensional stream-temperature model that solves the time-dependent equation for the transfer of thermal energy across the air-water interface ( Yearsley, 2009, 2012 ). The model uses a semi-Lagrangian, particle tracking numerical scheme that is highly scalable in space and time. The model software was written initially for purposes of developing the Total Maximum Daily Load (TMDL) for water temperature in the Columbia River system ( Yearsley, 2003 ). The model had been modified to make use of the output from the large-scale hydrologic model VIC and regional scale model DHSVM.","title":"Model Overview"},{"location":"Overview/ModelOverview/#model-overview","text":"RBM is a one-dimensional stream-temperature model that solves the time-dependent equation for the transfer of thermal energy across the air-water interface ( Yearsley, 2009, 2012 ). The model uses a semi-Lagrangian, particle tracking numerical scheme that is highly scalable in space and time. The model software was written initially for purposes of developing the Total Maximum Daily Load (TMDL) for water temperature in the Columbia River system ( Yearsley, 2003 ). The model had been modified to make use of the output from the large-scale hydrologic model VIC and regional scale model DHSVM.","title":"Model overview"},{"location":"Overview/References/","text":"Publications \u00b6 Model Development and Description Liang, X., D.P. Lettenmaier, E.F. Wood, and S.J. Burges, 1994, A simple hydrologically based model of land surface water and energy fluxes for GSMs, J. Geophys. Res., 99(D7), 14,415-14,428. Leopold, L.B., and T. Maddock, 1953, The hydraulic geometry of channels and some physiographic implications, U.S. Geol. Surv. Prof. Paper, 252. Lohmann, D., R. Nolte-Holuber, and E. Raschke, 1996: A large-scale horizontal routing model to be coupled to land surface parameterization schemes, Tellus, 48(A), 708-721. Mohseni, O., H.G. Stefan, and T.R. Erickson, 1998, A nonlinear regression model for weekly stream temperatures, Water Resour. Res., 34(10), 2685-2693, doi:10.1029/98WR01877 Sun, N., J. Yearsley, N. Voisin, and D.P. Lettenmaier (2015): A spatially distributed model for the assessment of land use impacts on stream temperature in small urban watersheds, Hydrological Processes. http://dx.doi.org/10.1002/hyp.10363 . Yearsley J. (2012): A grid-based approach for simulating stream temperature. Wat. Resour. Res., 48. http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Wat. Resour. Res., http://dx.doi.org/doi:10.1029/2008WR007629 . Model Applications Cao, Q. N. Sun, J. Yearsley, B. Nijssen, and D. P. Lettenmaier (2016): Climate and land cover effects on the temperature of Puget Sound streams, http://dx.doi.org/10.1002/hyp.10784 . van Vliet, M.T.H., W.H.P. Franssen, J. Yearsley, F. Ludwig, I. Haddeland, D. P. Lettenmaier, and P. Kabat (2013): Global river discharge and water temperature under climate change, Global Environmental Change, http://dx.doi.org/10.1016/j.gloenvcha.2012.11.002 . van Vliet, M.T.H., J. Yearsley, W.H.P. Franssen, F. Ludwig, I. Haddeland, D.P. Lettenmaier, and P. Kabat (2012): Coupled daily streamflow and water temperature modelling in large river basins, Hydrol. Earth Syst. Sci. Discuss., 9, 8335-8374, http://dx.doi.org/10.5194/hess-16-4303-2012 . van Vliet, M.T.H., J. Yearsley, F. Ludwig, S. Vogele, D.P. Lettenmaier, and P. Kabat (2012): Vulnerability of US and European electricity supply to climate change, Nature Climate Change, http://dx.doi.10.1029/2008WR00762910.1038/nclimate1546 . Yearsley J. (2012): A grid-based approach for simulating stream temperature, Water Resour. Res., 48, W03506, http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Water Resour. Res., 45, W12405, http://dx.doi.org/10.1029/2008WR007629 . Connor, W.P., H.L. Burge, J.Yearsley and T.C. Bjornn (2003): Influence of flow and temperature on survival of wild subyearling Fall Chinook in the Snake River. North Amer. Journ. of Fisheries Management, 23(2):362-375, http://dx.doi.org/10.1577/1548-8675(2003)023%3C0362:IOFATO%3E2.0.CO;2 . Technical Reports Yearsley J. (2003): A preliminary analysis of the thermal regime of Dworshak Reservoir, EPA 910-R-03-011. Yearsley J. (2003): Columbia River Temperature Assessment: Simulation of the thermal regime of Lake Roosevelt, EPA 910-03-003. Yearsley J. (2003): Developing a Temperature Total Maximum Daily Load for the Columbia and Snake Rivers: Simulation Methods, EPA 910-R-03-003. Yearsley J. (2001): Application of a 1-D Temperature Model to the Columbia River System & Application of a 1-D Temperature Model to the Columbia River System - Appendix B Model Tests. Yearsley J., and C.M. Falter (2002): Analysis of ecological risk in the mid-Snake River using simulation methods. Appendix D in Ecological risk assessment for the Middle Snake River, EPA/600/R-01/017.","title":"References"},{"location":"Overview/References/#publications","text":"Model Development and Description Liang, X., D.P. Lettenmaier, E.F. Wood, and S.J. Burges, 1994, A simple hydrologically based model of land surface water and energy fluxes for GSMs, J. Geophys. Res., 99(D7), 14,415-14,428. Leopold, L.B., and T. Maddock, 1953, The hydraulic geometry of channels and some physiographic implications, U.S. Geol. Surv. Prof. Paper, 252. Lohmann, D., R. Nolte-Holuber, and E. Raschke, 1996: A large-scale horizontal routing model to be coupled to land surface parameterization schemes, Tellus, 48(A), 708-721. Mohseni, O., H.G. Stefan, and T.R. Erickson, 1998, A nonlinear regression model for weekly stream temperatures, Water Resour. Res., 34(10), 2685-2693, doi:10.1029/98WR01877 Sun, N., J. Yearsley, N. Voisin, and D.P. Lettenmaier (2015): A spatially distributed model for the assessment of land use impacts on stream temperature in small urban watersheds, Hydrological Processes. http://dx.doi.org/10.1002/hyp.10363 . Yearsley J. (2012): A grid-based approach for simulating stream temperature. Wat. Resour. Res., 48. http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Wat. Resour. Res., http://dx.doi.org/doi:10.1029/2008WR007629 . Model Applications Cao, Q. N. Sun, J. Yearsley, B. Nijssen, and D. P. Lettenmaier (2016): Climate and land cover effects on the temperature of Puget Sound streams, http://dx.doi.org/10.1002/hyp.10784 . van Vliet, M.T.H., W.H.P. Franssen, J. Yearsley, F. Ludwig, I. Haddeland, D. P. Lettenmaier, and P. Kabat (2013): Global river discharge and water temperature under climate change, Global Environmental Change, http://dx.doi.org/10.1016/j.gloenvcha.2012.11.002 . van Vliet, M.T.H., J. Yearsley, W.H.P. Franssen, F. Ludwig, I. Haddeland, D.P. Lettenmaier, and P. Kabat (2012): Coupled daily streamflow and water temperature modelling in large river basins, Hydrol. Earth Syst. Sci. Discuss., 9, 8335-8374, http://dx.doi.org/10.5194/hess-16-4303-2012 . van Vliet, M.T.H., J. Yearsley, F. Ludwig, S. Vogele, D.P. Lettenmaier, and P. Kabat (2012): Vulnerability of US and European electricity supply to climate change, Nature Climate Change, http://dx.doi.10.1029/2008WR00762910.1038/nclimate1546 . Yearsley J. (2012): A grid-based approach for simulating stream temperature, Water Resour. Res., 48, W03506, http://dx.doi.org/10.1029/2011WR011515 . Yearsley J. (2009): A semi-Lagrangian water temperature model for advection-dominated river systems, Water Resour. Res., 45, W12405, http://dx.doi.org/10.1029/2008WR007629 . Connor, W.P., H.L. Burge, J.Yearsley and T.C. Bjornn (2003): Influence of flow and temperature on survival of wild subyearling Fall Chinook in the Snake River. North Amer. Journ. of Fisheries Management, 23(2):362-375, http://dx.doi.org/10.1577/1548-8675(2003)023%3C0362:IOFATO%3E2.0.CO;2 . Technical Reports Yearsley J. (2003): A preliminary analysis of the thermal regime of Dworshak Reservoir, EPA 910-R-03-011. Yearsley J. (2003): Columbia River Temperature Assessment: Simulation of the thermal regime of Lake Roosevelt, EPA 910-03-003. Yearsley J. (2003): Developing a Temperature Total Maximum Daily Load for the Columbia and Snake Rivers: Simulation Methods, EPA 910-R-03-003. Yearsley J. (2001): Application of a 1-D Temperature Model to the Columbia River System & Application of a 1-D Temperature Model to the Columbia River System - Appendix B Model Tests. Yearsley J., and C.M. Falter (2002): Analysis of ecological risk in the mid-Snake River using simulation methods. Appendix D in Ecological risk assessment for the Middle Snake River, EPA/600/R-01/017.","title":"Publications"},{"location":"Overview/contact/","text":"Contact information \u00b6 Primary contact \u00b6 John Yearsley Affiliate Professor, Dept. of Civil and Environmental Engineering John developed the RBM stream temperature ( Yearsley, 2009 ), and coupled RBM with VIC for stream temperature simulations at regional and global scales. jyearsle@uw.edu","title":"Contacts"},{"location":"Overview/contact/#contact-information","text":"","title":"Contact information"},{"location":"Overview/contact/#primary-contact","text":"John Yearsley Affiliate Professor, Dept. of Civil and Environmental Engineering John developed the RBM stream temperature ( Yearsley, 2009 ), and coupled RBM with VIC for stream temperature simulations at regional and global scales. jyearsle@uw.edu","title":"Primary contact"},{"location":"SourceCode/Code/","text":"Code \u00b6 All development activity is coordinated via the UW-Hydro/RBM github page , where you can also find all archived, current, beta, and development versions of the model. More details about how to use github to download or manage your code, please refer to VIC/Introduction to git & github .","title":"Code"},{"location":"SourceCode/Code/#code","text":"All development activity is coordinated via the UW-Hydro/RBM github page , where you can also find all archived, current, beta, and development versions of the model. More details about how to use github to download or manage your code, please refer to VIC/Introduction to git & github .","title":"Code"}]}